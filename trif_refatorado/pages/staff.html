<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Staff - TRIF 2025</title>
    <link rel="stylesheet" href="../css/style.css" />
  </head>

  <body>
    <div id="menu-backdrop"></div>

    <header>
      <button
        id="hamburger"
        aria-label="Abrir menu"
        class="hamburger"
        aria-expanded="false"
      >
        <span></span><span></span><span></span>
      </button>

      <h1>ğŸ¤– Sistema TRIF 2025</h1>

      <div class="user-info">
        <span id="userName" class="user-badge"></span>
        <button
          id="btnLogout"
          class="btn-danger"
          style="padding: 8px 16px; font-size: 13px"
        >
          Sair
        </button>
      </div>
    </header>

    <div class="app-wrap">
      <nav id="menu">
        <button id="btnCombate">âš”ï¸ Arena de Combate</button>
        <button id="btnTabela">ğŸ“‹ Tabela de Dano</button>
        <button id="btnRanking">ğŸ† Ranking</button>
        <button id="btnInspecao">ğŸ” InspeÃ§Ã£o</button>
        <button id="btnRelatorios">ğŸ“„ RelatÃ³rios</button>
      </nav>

      <main id="content"></main>
    </div>

    <!-- Scripts -->
    <script src="../js/auth.js"></script>
    <script src="../js/data.js"></script>
    <script src="../js/utils.js"></script>
    <script src="../js/shared.js"></script>
    <script src="../js/combate-staff.js"></script>

    <script>
      // Verifica autenticaÃ§Ã£o
      if (!authService.requireAuth(["staff"])) {
        // Redireciona se nÃ£o autenticado ou sem permissÃ£o
      } else {
        // Inicializa
        const session = authService.getSession();
        document.getElementById("userName").textContent = session.name;

        // Configura logout
        document.getElementById("btnLogout").onclick = () =>
          authService.logout();

        // Inicializa menu
        menuManager.init();

        // Configura navegaÃ§Ã£o
        menuManager.setupNavigation({
          btnCombate: () => CombateStaff.render(),
          btnTabela: () => TabelaDano.render(),
          btnRanking: () => Ranking.render(),
          btnInspecao: () => Inspecao.render(),
          btnRelatorios: () => Relatorios.render(),
        });

        // Inicia na Arena de Combate
        CombateStaff.render();
        menuManager.setActive("btnCombate");
      }
    </script>
  </body>
</html>
